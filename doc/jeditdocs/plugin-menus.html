<!DOCTYPE HTML PUBLIC "-//Norman Walsh//DTD DocBook HTML 1.0//EN">
<HTML
><HEAD
><TITLE
>The Plugins Menu</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet"><LINK
REL="HOME"
TITLE="jEdit 2.3 User's Guide"
HREF="index.html"><LINK
REL="UP"
TITLE="Developing Plugins"
HREF="developing-plugins.html"><LINK
REL="PREVIOUS"
TITLE="Plugin Actions"
HREF="plugin-actions.html"><LINK
REL="NEXT"
TITLE="The Global Options Dialog Box"
HREF="plugin-options.html"></HEAD
><BODY
BGCOLOR="#FFFFFF"
><DIV
CLASS="NAVHEADER"
><H1
>jEdit 2.3 User's Guide</H1
><P
><A
HREF="plugin-options.html"
>Next</A
>, <A
HREF="plugin-actions.html"
>Prev</A
></P
><H2
>Chapter 10. Developing Plugins</H2
><HR></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="PLUGIN-MENUS"
>The Plugins Menu</A
></H1
><P
>   When a view is created, it queries all installed plugins for any menus
   and menu items they want to add to the Plugins menu.
  </P
><P
>   While creating new
   <TT
CLASS="CLASSNAME"
>JMenuItem</TT
> and <TT
CLASS="CLASSNAME"
>JMenu</TT
> instances
   with hardcoded labels might seem like the easy way out,
   in reality it is not a good idea because the resulting plugin is
   inflexible and not easily localizable. This chapter describes
   how to do it the jEdit way.
  </P
><H4
CLASS="BRIDGEHEAD"
>EditPlugin.createMenuItems() method</H4
><DIV
CLASS="FUNCSYNOPSIS"
><P
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="FUNCSYNOPSISINFO"
>import java.util.Vector;
import org.gjt.sp.jedit.View;</PRE
></TD
></TR
></TABLE
><P
><CODE
><CODE
CLASS="FUNCDEF"
>void createMenuItems</CODE
>(View view, Vector menus, Vector menuItems);</CODE
></P
><P
></P
></DIV
><P
>   Newly created views call this method of each plugin in turn. The default
   implementation does nothing, but most plugins will want to override it
   to add instances of <TT
CLASS="CLASSNAME"
>javax.swing.JMenu</TT
>
   and <TT
CLASS="CLASSNAME"
>javax.swing.JMenuItem</TT
> to
   the appropriate vectors. While you could create instances of
   <TT
CLASS="CLASSNAME"
>JMenu</TT
> and <TT
CLASS="CLASSNAME"
>JMenuItem</TT
> directly,
   the preferred
   way is to use the
   methods of the <TT
CLASS="CLASSNAME"
>GUIUtilities</TT
> class.
  </P
><H4
CLASS="BRIDGEHEAD"
>GUIUtilities.loadMenu() method</H4
><DIV
CLASS="FUNCSYNOPSIS"
><P
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="FUNCSYNOPSISINFO"
>import javax.swing.JMenu;
import org.gjt.sp.jedit.GUIUtilities;
import org.gjt.sp.jedit.View;</PRE
></TD
></TR
></TABLE
><P
><CODE
><CODE
CLASS="FUNCDEF"
>public static JMenu loadMenu</CODE
>(View view, String name);</CODE
></P
><P
></P
></DIV
><P
>   The <TT
CLASS="FUNCTION"
>loadMenu()</TT
> method loads a menu from the properties.
   It obtains the menu from the following properties:
  </P
><P
></P
><UL
><LI
><P
><SPAN
CLASS="PROPERTY"
><TT
CLASS="REPLACEABLE"
><I
>name</I
></TT
>.label</SPAN
>:
   the menu label, as it will appear in the <SPAN
CLASS="GUIMENU"
>Plugins</SPAN
> menu
   </P
></LI
><LI
><P
><SPAN
CLASS="PROPERTY"
><TT
CLASS="REPLACEABLE"
><I
>name</I
></TT
></SPAN
>:
   a whitespace separated list of action names that are to appear in the
   menu. A dash ("-") in the list will insert a menu separator
   </P
></LI
></UL
><H4
CLASS="BRIDGEHEAD"
>GUIUtilities.loadMenuItem() method</H4
><DIV
CLASS="FUNCSYNOPSIS"
><P
></P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="FUNCSYNOPSISINFO"
>import javax.swing.JMenuItem;
import org.gjt.sp.jedit.GUIUtilities;
import org.gjt.sp.jedit.View;</PRE
></TD
></TR
></TABLE
><P
><CODE
><CODE
CLASS="FUNCDEF"
>public static JMenuItem loadMenuItem</CODE
>(View view, String name);</CODE
></P
><P
></P
></DIV
><P
>   The <TT
CLASS="FUNCTION"
>loadMenuItem()</TT
> loads a menu item from the properties.
   It is bound to the action named <TT
CLASS="PARAMETER"
><I
>name</I
></TT
>, and the menu item
   label is loaded from the property named
   <SPAN
CLASS="PROPERTY"
><TT
CLASS="REPLACEABLE"
><I
>name</I
></TT
>.label</SPAN
>.
  </P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>Note: </B
>    While you might be tempted to assign convenient keyboard shortcuts
    to your plugin's actions, doing so
    is highly discouraged, for several reasons.
    First of all, if two plugins bind to the
    same key, nothing good will happen. Secondly, future jEdit versions
    might use your shortcuts. It is much better to let the user decide
    which plugins they actually use, and assign whatever shortcuts
    they want to them.
   </P
></BLOCKQUOTE
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR><A
HREF="index.html"
>Home</A
>, <A
HREF="developing-plugins.html"
>Up</A
><BR><A
HREF="plugin-actions.html"
>Prev</A
>: Plugin Actions<BR><A
HREF="plugin-options.html"
>Next</A
>: The Global Options Dialog Box<BR></DIV
></BODY
></HTML
>